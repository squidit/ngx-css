(function(){"use strict";const f=function(){function c(){this.queue=new v,this.cancellationTokens=[],this.element=null}const s={default:{className:"",fadeDuration:400,fadeInterval:16,duration:1e4,closeButton:!1,immediately:!1,notOverClick:!1,onClick:null,persistent:!1},success:{className:""},inverted:{className:""},info:{className:""},warning:{className:""},grayscale:{className:""},custom:{className:""},theme:{className:""},error:{className:"",duration:1e4,closeButton:!0}};c.prototype.initElement=function(i={},e){const a=document.createElement("div"),n=document.createElement("div"),t=document.createElement("div"),o=document.createElement("span");a.setAttribute("id","toast-container"),a.setAttribute("class","toast-container"),n.setAttribute("id","toast"),n.setAttribute("class","toast"),t.setAttribute("id","toast-text"),t.setAttribute("class","toast-text"),o.setAttribute("id","toast-close-button"),o.setAttribute("class","toast-close-button"),o.innerHTML="&#10006",n.appendChild(t),n.appendChild(o),a.appendChild(n),e?document.getElementById(seletor).appendChild(containter):document.body.appendChild(a),this.element={container:a,toastBox:n,text:t,closeButton:o,persistent:!!i&&i.persistent},l(this,"default",s.default)},c.prototype.cancel=function(){this.cancellationTokens.length&&this.cancellationTokens[0].cancel()},c.prototype.cancelAll=function(){const i=this.cancellationTokens.length;for(let e=0;e<i;e++)this.cancellationTokens[i-e-1].cancel()},c.prototype.show=function(i,e,a,n){const t=this;t.element||t.initElement(e),e||(e={}),e.immediately&&t.cancelAll();const o=new T;return t.queue.enqueue(function(u){const k=e.fadeInterval||s.default.fadeInterval,w=Math.min(k/(e.fadeDuration||s.default.fadeDuration),1),B=e.duration||s.default.duration;t.element.closeButton.style.display=e.closeButton?"inline-block":"none",t.element.text.innerHTML=i;const p=t.element.toastBox.style;p.opacity=0,p.display="inline-grid",t.element.container.className=`toast-container ${e&&e.position?e.position:""} ${e.closeButton?"has-close":""}`,l(t,a,e);let m=null;const x=function(){m=null,t.element.text.removeEventListener("click",C),t.element.toastBox.removeEventListener("click",h),t.element.text.classList="toast-text",function d(i,e,a,n){e||(e={});const o=e.fadeInterval||s.default.fadeInterval,u=Math.min(o/(e.fadeDuration||s.default.fadeDuration),1),r=i.element.toastBox.style;r.opacity=1,y(r,-u,o,a,function(){r.display="none",n&&n()})}(t,e,o,function(){n&&n(),t.cancellationTokens.shift().dispose(),u()})},h=function(){m&&(clearTimeout(m),x())},C=function(){return e.onClick()};y(p,w,k,o,function(){e.notOverClick||s.default.notOverClick?(t.element.closeButton.addEventListener("click",h),e.onClick&&"function"==typeof e.onClick&&(t.element.text.classList="toast-text clickable",t.element.text.addEventListener("click",C))):t.element.toastBox.addEventListener("click",h),o.isCancellationRequested?x():(m=setTimeout(x,B),o.register(function(){h()}))})}),t.cancellationTokens.push(o),t};for(const i in s)!function(e){c.prototype[e]=function(a,n,t){n||(n={});for(const o in s[e])void 0===n[o]&&(n[o]=s[e][o]);return this.show(a,n,e,t)}}(i);function l(i,e,a){i.element.toastBox.className=`toast ${e||"default"} ${a.notOverClick||s.default.notOverClick?"not-click":""} ${a.className||s.default.className}`}function y(i,e,a,n,t){!function o(){if(n.isCancellationRequested)return i.opacity=e<0?0:1,void(t&&t());if(i.opacity=Number(i.opacity)+e,e<0&&i.opacity<0)t&&t();else if(e>0&&i.opacity>=1)t&&t();else{let u=setTimeout(function(){u=null,o()},a);n.register(function(){u&&(clearTimeout(u),u=null,t&&t())})}}()}return c}(),T=function(){function c(){this.isCancellationRequested=!1,this.cancelCallbacks=[]}return c.prototype.cancel=function(){this.isCancellationRequested=!0;const s=this.cancelCallbacks.slice();for(;s.length;)s.shift()()},c.prototype.register=function(s){this.cancelCallbacks.push(s)},c.prototype.dispose=function(){for(;this.cancelCallbacks.length;)this.cancelCallbacks.shift()},c}(),v=function(){function c(){this.queue=[],this.isExecuting=!1}function s(l){if(l.isExecuting)return;const d=l.queue.shift();d&&(l.isExecuting=!0,d(function(){l.isExecuting=!1,s(l)}))}return c.prototype.enqueue=function(l){this.queue.push(l),s(this)},c}();typeof exports<"u"?(typeof module<"u"&&module.exports&&(exports=module.exports=new f),exports.Toast=new f):this.Toast=new f}).call(this),window.onpopstate=f=>{window.Toast&&window.Toast.element&&!window.Toast.element.persistent&&window.Toast.element.closeButton&&window.Toast.element.closeButton.click()};