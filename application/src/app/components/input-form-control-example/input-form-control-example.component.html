<div class="container py-5">
  <div class="row">
    <div class="col-12">
      <h1 class="mb-4">SqInputFormControl - Exemplos de Uso</h1>
      <p class="lead mb-5">Demonstração completa do componente moderno com ControlValueAccessor</p>
    </div>
  </div>

  <!-- Exemplo com Reactive Forms -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h3>1. Reactive Forms com Validações</h3>
          <p class="mb-0">Formulário completo usando FormGroup e validações do Angular</p>
        </div>
        <div class="card-body">
          <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
            <div class="row">
              <div class="col-md-6 mb-3">
                <sq-input-form-control
                  formControlName="name"
                  [label]="'Nome Completo'"
                  [placeholder]="'Digite seu nome'"
                  [required]="true"
                  [tooltipMessage]="'Digite seu nome completo (mínimo 3 caracteres)'"
                  [tooltipIcon]="'fa-solid fa-circle-info'"
                ></sq-input-form-control>
                @if (userForm.get('name')?.touched && userForm.get('name')?.errors?.['required']) {
                  <small class="text-danger">Nome é obrigatório</small>
                }
                @if (userForm.get('name')?.touched && userForm.get('name')?.errors?.['minlength']) {
                  <small class="text-danger">Nome deve ter no mínimo 3 caracteres</small>
                }
              </div>

              <div class="col-md-6 mb-3">
                <sq-input-form-control
                  formControlName="email"
                  [label]="'Email'"
                  [type]="'email'"
                  [placeholder]="'seu@email.com'"
                  [required]="true"
                ></sq-input-form-control>
                @if (userForm.get('email')?.touched && userForm.get('email')?.errors?.['required']) {
                  <small class="text-danger">Email é obrigatório</small>
                }
                @if (userForm.get('email')?.touched && userForm.get('email')?.errors?.['email']) {
                  <small class="text-danger">Email inválido</small>
                }
              </div>

              <div class="col-md-6 mb-3">
                <sq-input-form-control
                  formControlName="phone"
                  [label]="'Telefone'"
                  [type]="'tel'"
                  [placeholder]="'(00) 00000-0000'"
                  [required]="true"
                  [inputMode]="'tel'"
                ></sq-input-form-control>
              </div>

              <div class="col-md-6 mb-3">
                <sq-input-form-control
                  formControlName="url"
                  [label]="'Website'"
                  [type]="'url'"
                  [placeholder]="'https://exemplo.com'"
                  [required]="true"
                ></sq-input-form-control>
              </div>

              <div class="col-md-6 mb-3">
                <sq-input-form-control
                  formControlName="password"
                  [label]="'Senha'"
                  [type]="'password'"
                  [placeholder]="'Digite sua senha'"
                  [required]="true"
                  [maxLength]="20"
                ></sq-input-form-control>
                @if (userForm.get('password')?.touched && userForm.get('password')?.errors?.['minlength']) {
                  <small class="text-danger">Senha deve ter no mínimo 6 caracteres</small>
                }
              </div>

              <div class="col-md-6 mb-3">
                <sq-input-form-control
                  formControlName="bio"
                  [label]="'Bio (Opcional)'"
                  [placeholder]="'Conte um pouco sobre você'"
                  [maxLength]="100"
                ></sq-input-form-control>
              </div>
            </div>

            <div class="d-flex gap-2 mt-4">
              <button type="submit" class="btn btn-primary">
                <i class="fa-solid fa-check mr-2"></i>
                Enviar Formulário
              </button>
              <button type="button" class="btn btn-secondary" (click)="onReset()">
                <i class="fa-solid fa-rotate-left mr-2"></i>
                Limpar
              </button>
              <button type="button" class="btn btn-info" (click)="fillWithExample()">
                <i class="fa-solid fa-fill mr-2"></i>
                Preencher Exemplo
              </button>
              <button type="button" class="btn btn-warning" (click)="logFormState()">
                <i class="fa-solid fa-bug mr-2"></i>
                Log Estado (Console)
              </button>
            </div>
          </form>

          <div class="mt-4 p-3 bg-light rounded">
            <h6>Estado do Formulário:</h6>
            <div class="row">
              <div class="col-md-6">
                <strong>Válido:</strong>
                <span [class]="userForm.valid ? 'text-success' : 'text-danger'">
                  {{ userForm.valid ? '✓ Sim' : '✗ Não' }}
                </span>
              </div>
              <div class="col-md-6">
                <strong>Tocado:</strong>
                <span [class]="userForm.touched ? 'text-info' : 'text-muted'">
                  {{ userForm.touched ? 'Sim' : 'Não' }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Exemplo com FormControl Individual -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h3>2. FormControl Individual</h3>
          <p class="mb-0">Usando FormControl diretamente sem FormGroup</p>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <sq-input-form-control
                [formControl]="searchControl"
                [placeholder]="'Digite para buscar...'"
                [label]="'Busca com Delay'"
                [timeToChange]="500"
              ></sq-input-form-control>
            </div>
            <div class="col-md-6">
              <div class="alert alert-info">
                <strong>Valor atual:</strong> {{ searchControl.value || '(vazio)' }}
                <br />
                <small>Este campo tem um delay de 500ms antes de emitir mudanças</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Exemplo com Eventos -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h3>3. Eventos e Callbacks</h3>
          <p class="mb-0">Demonstração dos eventos disponíveis no componente</p>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <sq-input-form-control
                [label]="'Campo com Eventos'"
                [placeholder]="'Digite algo...'"
                (keyPressDown)="onKeyDown($event)"
                (keyPressUp)="onKeyUp($event)"
                (focused)="onFocusChange(true)"
                (blurred)="onFocusChange(false)"
                (valueChange)="onValueChange($event)"
              ></sq-input-form-control>
            </div>
            <div class="col-md-6">
              <div class="alert alert-secondary">
                <h6>Status dos Eventos:</h6>
                <ul class="mb-0">
                  <li><strong>Última tecla:</strong> {{ lastKeyPressed || 'Nenhuma' }}</li>
                  <li>
                    <strong>Em foco:</strong>
                    <span [class]="isFocused ? 'text-success' : 'text-muted'">
                      {{ isFocused ? 'Sim' : 'Não' }}
                    </span>
                  </li>
                  <li><strong>Último valor:</strong> {{ lastValue || '(vazio)' }}</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Exemplo com Estilos Customizados -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h3>4. Estilos Customizados</h3>
          <p class="mb-0">Personalizando cores e aparência do componente</p>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-4 mb-3">
              <sq-input-form-control
                [label]="'Input Azul'"
                [placeholder]="'Fundo azul claro'"
                [backgroundColor]="'#e3f2fd'"
                [borderColor]="'#2196f3'"
                [labelColor]="'#1976d2'"
              ></sq-input-form-control>
            </div>
            <div class="col-md-4 mb-3">
              <sq-input-form-control
                [label]="'Input Verde'"
                [placeholder]="'Fundo verde claro'"
                [backgroundColor]="'#e8f5e9'"
                [borderColor]="'#4caf50'"
                [labelColor]="'#388e3c'"
              ></sq-input-form-control>
            </div>
            <div class="col-md-4 mb-3">
              <sq-input-form-control
                [label]="'Input Roxo'"
                [placeholder]="'Fundo roxo claro'"
                [backgroundColor]="'#f3e5f5'"
                [borderColor]="'#9c27b0'"
                [labelColor]="'#7b1fa2'"
              ></sq-input-form-control>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Exemplo de Estados -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h3>5. Estados do Componente</h3>
          <p class="mb-0">Demonstração de diferentes estados (disabled, readonly, etc.)</p>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-4 mb-3">
              <sq-input-form-control [label]="'Campo Normal'" [placeholder]="'Pode digitar'"></sq-input-form-control>
            </div>
            <div class="col-md-4 mb-3">
              <sq-input-form-control
                [label]="'Campo Desabilitado'"
                [placeholder]="'Não pode digitar'"
                [formControl]="disabledControl"
              ></sq-input-form-control>
            </div>
            <div class="col-md-4 mb-3">
              <sq-input-form-control
                [label]="'Campo Somente Leitura'"
                [placeholder]="'Somente leitura'"
                [readonly]="true"
              ></sq-input-form-control>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Informações Adicionais -->
  <div class="row">
    <div class="col-12">
      <div class="alert alert-info">
        <h5><i class="fa-solid fa-circle-info mr-2"></i>Informações Adicionais</h5>
        <ul class="mb-0">
          <li>
            O componente implementa <strong>ControlValueAccessor</strong> para integração completa com Angular Forms
          </li>
          <li>Suporta validações nativas do Angular (required, email, minLength, etc.)</li>
          <li>Usa a função moderna <strong>inject()</strong> em vez de injeção no construtor</li>
          <li>É um componente <strong>standalone</strong>, não requer módulos</li>
          <li>Mantém toda a funcionalidade do componente original <code>sq-input</code></li>
          <li>Veja mais exemplos e documentação no arquivo <code>README.md</code> do componente</li>
        </ul>
      </div>
    </div>
  </div>
</div>
